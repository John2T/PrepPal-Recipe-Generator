<%- include("templates/header") %>
    <div class="container" style="max-width: 800px; margin-top: 20px;">
        <h1 class="text-center">Your Favorites</h1>

        <% const parsedFavorites = JSON.parse(favorites); %>
            <% if (parsedFavorites.length > 0) { %>
                <div
                    style="background-color: #f5f5f5; padding: 10px; box-shadow: 2px 2px 10px #888888; margin-bottom: 20px;">
                    <div class="recipe-cards">
                        <!-- For each loop that iterates through the favourites collection and creates a
                        recipe card for each item -->
                        <% parsedFavorites.forEach((recipe) => { %>
                            <div class="recipe-card">
                                <img src="<%= recipe.image %>" alt="<%= recipe.title %>">
                                <h3><%= recipe.title %></h3>
                                <a
                                    id="viewRecipe"
                                    href="/allFavourites/<%= recipe.recipeId %>"
                                    class="btn btn-primary">View Recipe</a>
                            </div>
                            <% }) %>
                            </div>
                        </div>
                    <% } else { %>
                        <div class="text-center">
                            <p>Favourite a recipe to see it here!.</p>
                        </div>
                    <% } %>

                    <style>
                        body {
                            margin-bottom: 50px;
                        }

                        .recipe-cards {
                            display: flex;
                            flex-direction: column;
                            align-items: stretch;
                            gap: 20px;
                        }

                        .recipe-card {
                            background-color: #ffffff;
                            padding: 20px;
                            box-shadow: 2px 2px 10px #888888;
                            border-radius: 5px;
                        }

                        .recipe-card img {
                            width: 100%;
                            max-height: 200px;
                            object-fit: cover;
                            border-radius: 5px;
                            margin-bottom: 10px;
                        }

                        .recipe-card h3 {
                            font-size: 18px;
                            margin-bottom: 10px;
                        }

                        .recipe-card p {
                            margin-bottom: 10px;
                        }

                        .recipe-card ul {
                            padding-left: 20px;
                            margin-bottom: 10px;
                        }

                        .recipe-card li {
                            margin-bottom: 5px;
                        }

                        h1 {
                            background-color: #00CED1;
                            border-bottom-left-radius: 50%;
                            border-bottom-right-radius: 50%;
                            color: #FFFFFF;
                        }

                        h2 {
                            font-weight: bold;
                            font-size: 20px;
                        }

                        #viewRecipe {
                            background-color: #00CED1;
                            color: white;
                            border: none;
                            border-radius: 10px;
                        }
                    </style>
                </div>

                <%- include("templates/footer") %>